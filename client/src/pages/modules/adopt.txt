<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS Setup & Configuration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(14, 54, 70, 0.15);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #0E3646 0%, #1a5570 100%);
            color: white;
            padding: 30px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #28a745;
            color: white;
        }

        .btn-primary:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #0E3646;
        }

        .btn-secondary:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-warning {
            background: #ffc107;
            color: #000;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-info:hover {
            background: #138496;
        }

        .content {
            padding: 40px;
        }

        .tabs {
            display: flex;
            gap: 5px;
            border-bottom: 3px solid #0E3646;
            margin-bottom: 30px;
        }

        .tab {
            padding: 15px 30px;
            background: #f8f9fa;
            border: none;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab:hover {
            background: #e9ecef;
            color: #0E3646;
        }

        .tab.active {
            background: #0E3646;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            color: #0E3646;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 3px solid #0E3646;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            color: #0E3646;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .required {
            color: #dc3545;
        }

        .form-control {
            padding: 12px 16px;
            border: 2px solid #dce1e8;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #0E3646;
            box-shadow: 0 0 0 4px rgba(14, 54, 70, 0.1);
        }

        .form-control:disabled {
            background-color: #f8f9fa;
            cursor: not-allowed;
        }

        select.form-control {
            cursor: pointer;
            background-color: white;
        }

        .info-card {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-left: 4px solid #2196F3;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
        }

        .info-card h3 {
            color: #0E3646;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .info-card p {
            color: #555;
            font-size: 14px;
            line-height: 1.6;
        }

        .warning-card {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-left: 4px solid #ffc107;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
        }

        .warning-card h3 {
            color: #856404;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 2px solid #dce1e8;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #0E3646;
            color: white;
        }

        th {
            padding: 14px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        tbody tr {
            border-bottom: 1px solid #e9ecef;
            transition: background-color 0.2s ease;
        }

        tbody tr:hover {
            background-color: #f8f9fa;
        }

        td {
            padding: 14px 12px;
            font-size: 14px;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-open {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-closed {
            background: #f8d7da;
            color: #721c24;
        }

        .status-inactive {
            background: #e2e3e5;
            color: #383d41;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 16px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #0E3646;
        }

        .modal-header h2 {
            color: #0E3646;
            font-size: 24px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 32px;
            color: #6c757d;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .close-btn:hover {
            background: #f8f9fa;
            color: #0E3646;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-card.green {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .stat-card.blue {
            background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%);
        }

        .stat-card.orange {
            background: linear-gradient(135deg, #f2994a 0%, #f2c94c 100%);
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #28a745;
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        .alert {
            padding: 16px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .alert-success {
            background: #d4edda;
            border: 2px solid #c3e6cb;
            color: #155724;
        }

        .alert-danger {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
            color: #721c24;
        }

        .alert-info {
            background: #d1ecf1;
            border: 2px solid #bee5eb;
            color: #0c5460;
        }

        .cash-denomination {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .denomination-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #dce1e8;
        }

        .denomination-label {
            font-weight: 600;
            color: #0E3646;
            margin-bottom: 8px;
        }

        .denomination-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .denomination-input input {
            width: 80px;
            padding: 8px;
            border: 2px solid #dce1e8;
            border-radius: 6px;
            text-align: center;
        }

        .denomination-total {
            margin-top: 8px;
            font-size: 14px;
            color: #28a745;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .content {
                padding: 20px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                min-width: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öôÔ∏è POS Setup & Configuration</h1>
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="window.location.href='pos-invoice.html'">
                    üõí Go to POS
                </button>
                <button class="btn btn-primary" onclick="saveAllSettings()">
                    üíæ Save All Settings
                </button>
            </div>
        </div>

        <div class="content">
            <div id="alertContainer"></div>

            <div class="tabs">
                <button class="tab active" onclick="showTab('sessions')">üïê Sessions & Shifts</button>
                <button class="tab" onclick="showTab('terminals')">üñ•Ô∏è Terminals</button>
                <button class="tab" onclick="showTab('payment')">üí≥ Payment Methods</button>
                <button class="tab" onclick="showTab('general')">‚öôÔ∏è General Settings</button>
            </div>

            <!-- Sessions & Shifts Tab -->
            <div id="sessions" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card green">
                        <div class="stat-value" id="activeSessionsCount">0</div>
                        <div class="stat-label">Active Sessions</div>
                    </div>
                    <div class="stat-card blue">
                        <div class="stat-value" id="totalSessionsToday">0</div>
                        <div class="stat-label">Sessions Today</div>
                    </div>
                    <div class="stat-card orange">
                        <div class="stat-value" id="totalSalesToday">$0.00</div>
                        <div class="stat-label">Total Sales Today</div>
                    </div>
                </div>

                <div class="section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 class="section-title" style="margin-bottom: 0;">üìä Current Sessions</h2>
                        <button class="btn btn-primary" onclick="openSessionModal()">
                            ‚ûï Open New Session
                        </button>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Session #</th>
                                    <th>Terminal</th>
                                    <th>Cashier</th>
                                    <th>Start Time</th>
                                    <th>Opening Cash</th>
                                    <th>Current Cash</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="sessionsTableBody">
                                <!-- Sessions will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Terminals Tab -->
            <div id="terminals" class="tab-content">
                <div class="section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 class="section-title" style="margin-bottom: 0;">üñ•Ô∏è POS Terminals</h2>
                        <button class="btn btn-primary" onclick="openTerminalModal()">
                            ‚ûï Add New Terminal
                        </button>
                    </div>

                    <div class="info-card">
                        <h3>üí° Terminal Information</h3>
                        <p>POS Terminals are physical or virtual points of sale where transactions are processed. Configure each terminal with specific settings, assign them to warehouses, and manage their operational status.</p>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Terminal Code</th>
                                    <th>Terminal Name</th>
                                    <th>Warehouse</th>
                                    <th>Counter #</th>
                                    <th>IP Address</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="terminalsTableBody">
                                <!-- Terminals will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Payment Methods Tab -->
            <div id="payment" class="tab-content">
                <div class="section">
                    <h2 class="section-title">üí≥ Payment Method Configuration</h2>

                    <div class="warning-card">
                        <h3>‚ö†Ô∏è Important</h3>
                        <p>Configure which payment methods are available at your POS terminals. Disabled methods will not appear during checkout.</p>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>üíµ Cash Payment</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="cashEnabled" checked onchange="updatePaymentMethod('CASH', this.checked)">
                                    <span class="slider"></span>
                                </label>
                            </label>
                            <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <label style="font-size: 13px; color: #6c757d;">Cash Float Required</label>
                                <input type="number" class="form-control" id="cashFloatAmount" value="500.00" step="0.01" style="margin-top: 8px;">
                            </div>
                        </div>

                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>üí≥ Credit/Debit Card</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="cardEnabled" checked onchange="updatePaymentMethod('CARD', this.checked)">
                                    <span class="slider"></span>
                                </label>
                            </label>
                            <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <label style="font-size: 13px; color: #6c757d;">Card Reader Device</label>
                                <select class="form-control" id="cardReaderDevice" style="margin-top: 8px;">
                                    <option value="PAX">PAX Terminal</option>
                                    <option value="INGENICO">Ingenico</option>
                                    <option value="VERIFONE">VeriFone</option>
                                    <option value="SQUARE">Square Reader</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>üì± UPI Payment</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="upiEnabled" checked onchange="updatePaymentMethod('UPI', this.checked)">
                                    <span class="slider"></span>
                                </label>
                            </label>
                            <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <label style="font-size: 13px; color: #6c757d;">UPI Merchant ID</label>
                                <input type="text" class="form-control" id="upiMerchantId" value="merchant@bank" style="margin-top: 8px;">
                            </div>
                        </div>

                        <div class="form-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>üëõ Digital Wallet</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="walletEnabled" onchange="updatePaymentMethod('WALLET', this.checked)">
                                    <span class="slider"></span>
                                </label>
                            </label>
                            <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <label style="font-size: 13px; color: #6c757d;">Supported Wallets</label>
                                <select class="form-control" id="walletProvider" multiple style="margin-top: 8px; height: 80px;">
                                    <option value="PAYTM">Paytm</option>
                                    <option value="GPAY">Google Pay</option>
                                    <option value="PHONEPE">PhonePe</option>
                                    <option value="AMAZONPAY">Amazon Pay</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- General Settings Tab -->
            <div id="general" class="tab-content">
                <div class="section">
                    <h2 class="section-title">‚öôÔ∏è General POS Settings</h2>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>Company Name</label>
                            <input type="text" class="form-control" id="companyName" value="ABC Retail Store">
                        </div>

                        <div class="form-group">
                            <label>Default Warehouse</label>
                            <select class="form-control" id="defaultWarehouse">
                                <option value="1">Main Warehouse</option>
                                <option value="2">Branch Warehouse A</option>
                                <option value="3">Branch Warehouse B</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Default Currency</label>
                            <select class="form-control" id="defaultCurrency">
                                <option value="USD">USD - US Dollar</option>
                                <option value="EUR">EUR - Euro</option>
                                <option value="GHS">GHS - Ghana Cedi</option>
                                <option value="INR">INR - Indian Rupee</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Tax Rate (%)</label>
                            <input type="number" class="form-control" id="taxRate" value="15.00" step="0.01" min="0" max="100">
                        </div>

                        <div class="form-group">
                            <label>Receipt Printer</label>
                            <select class="form-control" id="receiptPrinter">
                                <option value="EPSON">Epson TM-T88</option>
                                <option value="STAR">Star TSP143</option>
                                <option value="CITIZEN">Citizen CT-S310</option>
                                <option value="PDF">PDF Export</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Invoice Number Prefix</label>
                            <input type="text" class="form-control" id="invoicePrefix" value="INV" maxlength="10">
                        </div>

                        <div class="form-group">
                            <label>Auto Print Receipt</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoPrintReceipt" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="form-group">
                            <label>Allow Discount</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="allowDiscount" checked>
                                <span class="slider"></span>
                            </label>
                        </div>

                        <div class="form-group">
                            <label>Max Discount (%)</label>
                            <input type="number" class="form-control" id="maxDiscount" value="20.00" step="0.01" min="0" max="100">
                        </div>

                        <div class="form-group">
                            <label>Low Stock Warning</label>
                            <input type="number" class="form-control" id="lowStockWarning" value="10" min="0">
                        </div>

                        <div class="form-group">
                            <label>Session Timeout (minutes)</label>
                            <input type="number" class="form-control" id="sessionTimeout" value="480" min="30">
                        </div>

                        <div class="form-group">
                            <label>Barcode Scanner Type</label>
                            <select class="form-control" id="barcodeScanner">
                                <option value="USB">USB Scanner</option>
                                <option value="BLUETOOTH">Bluetooth Scanner</option>
                                <option value="CAMERA">Camera Scanner</option>
                            </select>
                        </div>
                    </div>

                    <div class="section" style="margin-top: 40px;">
                        <h3 class="section-title">üñ®Ô∏è Receipt Settings</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Receipt Header Text</label>
                                <textarea class="form-control" id="receiptHeader" rows="3">ABC Retail Store
123 Main Street, City
Tel: +1234567890</textarea>
                            </div>

                            <div class="form-group">
                                <label>Receipt Footer Text</label>
                                <textarea class="form-control" id="receiptFooter" rows="3">Thank you for shopping with us!
Visit us again soon!
www.abcretail.com</textarea>
                            </div>

                            <div class="form-group">
                                <label>Show Logo on Receipt</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="showLogo" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="form-group">
                                <label>Show Barcode on Receipt</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="showBarcode" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Open Session Modal -->
    <div id="sessionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üïê Open New Session</h2>
                <button class="close-btn" onclick="closeSessionModal()">&times;</button>
            </div>

            <form id="sessionForm" onsubmit="openSession(event)">
                <div class="form-group">
                    <label>Session Number <span class="required">*</span></label>
                    <input type="text" class="form-control" id="sessionNumber" required readonly>
                </div>

                <div class="form-group">
                    <label>Terminal <span class="required">*</span></label>
                    <select class="form-control" id="sessionTerminal" required>
                        <option value="">Select Terminal</option>
                        <option value="1">TERM-001 - Main Counter</option>
                        <option value="2">TERM-002 - Express Counter</option>
                        <option value="3">TERM-003 - Self-Checkout</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Cashier <span class="required">*</span></label>
                    <select class="form-control" id="sessionCashier" required>
                        <option value="">Select Cashier</option>
                        <option value="1">John Doe</option>
                        <option value="2">Jane Smith</option>
                        <option value="3">Mike Johnson</option>
                        <option value="4">Sarah Williams</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Opening Cash Amount <span class="required">*</span></label>
                    <input type="number" class="form-control" id="openingCash" step="0.01" min="0" required>
                </div>

                <div class="section" style="margin-top: 30px;">
                    <h3 style="color: #0E3646; margin-bottom: 20px;">üí∞ Cash Denomination Count</h3>
                    <div class="cash-denomination">
                        <div class="denomination-item">
                            <div class="denomination-label">$100 Bills</div>
                            <div class="denomination-input">
                                <span>√ó</span>
                                <input type="number" min="0" value="0" onchange="calculateDenomination(100, this.value, 'denom100')">
                                <span>=</span>
                            </div>
                            <div class="denomination-total" id="denom100">$0.00</div>
                        </div>

                        <div class="denomination-item">
                            <div class="denomination-label">$50 Bills</div>
                            <div class="denomination-input">
                                <span>√ó</span>
                                <input type="number" min="0" value="0" onchange="calculateDenomination(50, this.value, 'denom50')">
                                <span>=</span>
                            </div>
                            <div class="denomination-total" id="denom50">$0.00</div>
                        </div>

                        <div class="denomination-item">
                            <div class="denomination-label">$20 Bills</div>
                            <div class="denomination-input">
                                <span>√ó</span>
                                <input type="number" min="0" value="0" onchange="calculateDenomination(20, this.value, 'denom20')">
                                <span>=</span>
                            </div>
                            <div class="denomination-total" id="denom20">$0.00</div>
                        </div>

                        <div class="denomination-item">
                            <div class="denomination-label">$10 Bills</div>
                            <div class="denomination-input">
                                <span>√ó</span>
                                <input type="number" min="0" value="0" onchange="calculateDenomination(10, this.value, 'denom10')">
                                <span>=</span>
                            </div>
                            <div class="denomination-total" id="denom10">$0.00</div>
                        </div>

                        <div class="denomination-item">
                            <div class="denomination-label">$5 Bills</div>
                            <div class="denomination-input">
                                <span>√ó</span>
                                <input type="number" min="0" value="0" onchange="calculateDenomination(5, this.value, 'denom5')">
                                <span>=</span>
                            </div>
                            <div class="denomination-total" id="denom5">$0.00</div>
                        </div>

                        <div class="denomination-item">
                            <div class="denomination-label">$1 Bills</div>
                            <div class="denomination-input">
                                <span>√ó</span>
                                <input type="number" min="0" value="0" onchange="calculateDenomination(1, this.value, 'denom1')">
                                <span>=</span>
                            </div>
                            <div class="denomination-total" id="denom1">$0.00</div>
                        </div>

                        <div class="denomination-item">
                            <div class="denomination-label">Quarters</div>
                            <div class="denomination-input">
                                <span>√ó</span>
                                <input type="number" min="0" value="0" onchange="calculateDenomination(0.25, this.value, 'denomQ')">
                                <span>=</span>
                            </div>
                            <div class="denomination-total" id="denomQ">$0.00</div>
                        </div>

                        <div class="denomination-item">
                            <div class="denomination-label">Other Coins</div>
                            <div class="denomination-input">
                                <input type="number" min="0" step="0.01" value="0" onchange="calculateOther(this.value)">
                            </div>
                            <div class="denomination-total" id="denomOther">$0.00</div>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding: 20px; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-radius: 8px; text-align: center;">
                        <div style="font-size: 14px; color: #0E3646; margin-bottom: 5px;">Total Opening Cash</div>
                        <div style="font-size: 32px; font-weight: 700; color: #0E3646;" id="totalOpeningCash">$0.00</div>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 30px;">
                    <label>Notes</label>
                    <textarea class="form-control" id="sessionNotes" rows="3"></textarea>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 30px;">
                    <button type="button" class="btn btn-secondary" onclick="closeSessionModal()" style="flex: 1;">Cancel</button>
                    <button type="submit" class="btn btn-primary" style="flex: 1;">Open Session</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Close Session Modal -->
    <div id="closeSessionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üîí Close Session</h2>
                <button class="close-btn" onclick="closeCloseSessionModal()">&times;</button>
            </div>

            <div class="warning-card">
                <h3>‚ö†Ô∏è Session Closing</h3>
                <p>Count all cash in the drawer and verify the amounts match your transactions.</p>
            </div>

            <form id="closeSessionForm" onsubmit="closeSession(event)">
                <input type="hidden" id="closingSessionId">

                <div class="form-grid">
                    <div class="form-group">
                        <label>Session Number</label>
                        <input type="text" class="form-control" id="closingSessionNumber" readonly>
                    </div>

                    <div class="form-group">
                        <label>Opening Cash</label>
                        <input type="text" class="form-control" id="closingOpeningCash" readonly>
                    </div>

                    <div class="form-group">
                        <label>Expected Sales</label>
                        <input type="text" class="form-control" id="closingExpectedSales" readonly>
                    </div>

                    <div class="form-group">
                        <label>Expected Total Cash</label>
                        <input type="text" class="form-control" id="closingExpectedTotal" readonly>
                    </div>
                </div>

                <div class="form-group">
                    <label>Actual Closing Cash <span class="required">*</span></label>
                    <input type="number" class="form-control" id="closingCashAmount" step="0.01" min="0" required>
                </div>

                <div class="form-group">
                    <label>Cash Difference</label>
                    <input type="text" class="form-control" id="cashDifference" readonly style="font-weight: 700; font-size: 16px;">
                </div>

                <div class="form-group">
                    <label>Closing Notes</label>
                    <textarea class="form-control" id="closingNotes" rows="3"></textarea>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 30px;">
                    <button type="button" class="btn btn-secondary" onclick="closeCloseSessionModal()" style="flex: 1;">Cancel</button>
                    <button type="submit" class="btn btn-danger" style="flex: 1;">Close Session</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Terminal Modal -->
    <div id="terminalModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üñ•Ô∏è Terminal Configuration</h2>
                <button class="close-btn" onclick="closeTerminalModal()">&times;</button>
            </div>

            <form id="terminalForm" onsubmit="saveTerminal(event)">
                <input type="hidden" id="terminalId">

                <div class="form-grid">
                    <div class="form-group">
                        <label>Terminal Code <span class="required">*</span></label>
                        <input type="text" class="form-control" id="terminalCode" required>
                    </div>

                    <div class="form-group">
                        <label>Terminal Name <span class="required">*</span></label>
                        <input type="text" class="form-control" id="terminalName" required>
                    </div>

                    <div class="form-group">
                        <label>Warehouse <span class="required">*</span></label>
                        <select class="form-control" id="terminalWarehouse" required>
                            <option value="">Select Warehouse</option>
                            <option value="1">Main Warehouse</option>
                            <option value="2">Branch Warehouse A</option>
                            <option value="3">Branch Warehouse B</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Counter Number</label>
                        <input type="text" class="form-control" id="counterNumber">
                    </div>

                    <div class="form-group">
                        <label>IP Address</label>
                        <input type="text" class="form-control" id="ipAddress" placeholder="192.168.1.100">
                    </div>

                    <div class="form-group">
                        <label>Status</label>
                        <select class="form-control" id="terminalStatus">
                            <option value="Y">Active</option>
                            <option value="N">Inactive</option>
                        </select>
                    </div>
                </div>

                <div style="display: flex; gap: 10px; margin-top: 30px;">
                    <button type="button" class="btn btn-secondary" onclick="closeTerminalModal()" style="flex: 1;">Cancel</button>
                    <button type="submit" class="btn btn-primary" style="flex: 1;">Save Terminal</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Sample Data
        let sessions = [];
        let terminals = [
            { id: 1, code: 'TERM-001', name: 'Main Counter', warehouse: 'Main Warehouse', counter: '01', ip: '192.168.1.101', status: 'Y' },
            { id: 2, code: 'TERM-002', name: 'Express Counter', warehouse: 'Main Warehouse', counter: '02', ip: '192.168.1.102', status: 'Y' },
            { id: 3, code: 'TERM-003', name: 'Self-Checkout', warehouse: 'Main Warehouse', counter: '03', ip: '192.168.1.103', status: 'Y' }
        ];
        let sessionCounter = 1;
        let paymentMethods = {
            CASH: true,
            CARD: true,
            UPI: true,
            WALLET: false
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadSessions();
            loadTerminals();
            updateStats();
            generateSessionNumber();
        });

        // Tab Functions
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // Session Functions
        function generateSessionNumber() {
            const date = new Date();
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const num = String(sessionCounter).padStart(4, '0');
            document.getElementById('sessionNumber').value = `SES-${year}${month}${day}-${num}`;
        }

        function calculateDenomination(value, count, elementId) {
            const total = value * parseFloat(count || 0);
            document.getElementById(elementId).textContent = `${total.toFixed(2)}`;
            updateTotalOpeningCash();
        }

        function calculateOther(value) {
            document.getElementById('denomOther').textContent = `${parseFloat(value || 0).toFixed(2)}`;
            updateTotalOpeningCash();
        }

        function updateTotalOpeningCash() {
            const denominations = ['denom100', 'denom50', 'denom20', 'denom10', 'denom5', 'denom1', 'denomQ', 'denomOther'];
            let total = 0;
            
            denominations.forEach(id => {
                const value = document.getElementById(id).textContent.replace(', '');
                total += parseFloat(value);
            });

            document.getElementById('totalOpeningCash').textContent = `${total.toFixed(2)}`;
            document.getElementById('openingCash').value = total.toFixed(2);
        }

        function openSessionModal() {
            document.getElementById('sessionModal').classList.add('active');
            generateSessionNumber();
        }

        function closeSessionModal() {
            document.getElementById('sessionModal').classList.remove('active');
            document.getElementById('sessionForm').reset();
        }

        function openSession(e) {
            e.preventDefault();

            const session = {
                id: sessionCounter,
                sessionNumber: document.getElementById('sessionNumber').value,
                terminalId: document.getElementById('sessionTerminal').value,
                terminal: document.getElementById('sessionTerminal').options[document.getElementById('sessionTerminal').selectedIndex].text,
                cashierId: document.getElementById('sessionCashier').value,
                cashier: document.getElementById('sessionCashier').options[document.getElementById('sessionCashier').selectedIndex].text,
                openingCash: parseFloat(document.getElementById('openingCash').value),
                currentCash: parseFloat(document.getElementById('openingCash').value),
                startTime: new Date().toLocaleTimeString(),
                status: 'OPEN',
                sales: 0
            };

            sessions.push(session);
            sessionCounter++;

            showAlert('Session opened successfully!', 'success');
            closeSessionModal();
            loadSessions();
            updateStats();
        }

        function loadSessions() {
            const tbody = document.getElementById('sessionsTableBody');
            tbody.innerHTML = '';

            if (sessions.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 30px; color: #6c757d;">No active sessions. Click "Open New Session" to start.</td></tr>';
                return;
            }

            sessions.forEach(session => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${session.sessionNumber}</strong></td>
                    <td>${session.terminal}</td>
                    <td>${session.cashier}</td>
                    <td>${session.startTime}</td>
                    <td>${session.openingCash.toFixed(2)}</td>
                    <td>${session.currentCash.toFixed(2)}</td>
                    <td><span class="status-badge status-${session.status.toLowerCase()}">${session.status}</span></td>
                    <td>
                        <button class="btn btn-info btn-small" onclick="viewSession(${session.id})">View</button>
                        <button class="btn btn-danger btn-small" onclick="openCloseSessionModal(${session.id})">Close</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function openCloseSessionModal(sessionId) {
            const session = sessions.find(s => s.id === sessionId);
            if (!session) return;

            document.getElementById('closingSessionId').value = sessionId;
            document.getElementById('closingSessionNumber').value = session.sessionNumber;
            document.getElementById('closingOpeningCash').value = `${session.openingCash.toFixed(2)}`;
            document.getElementById('closingExpectedSales').value = `${session.sales.toFixed(2)}`;
            document.getElementById('closingExpectedTotal').value = `${(session.openingCash + session.sales).toFixed(2)}`;

            document.getElementById('closeSessionModal').classList.add('active');
        }

        function closeCloseSessionModal() {
            document.getElementById('closeSessionModal').classList.remove('active');
            document.getElementById('closeSessionForm').reset();
        }

        document.getElementById('closingCashAmount').addEventListener('input', function() {
            const sessionId = parseInt(document.getElementById('closingSessionId').value);
            const session = sessions.find(s => s.id === sessionId);
            if (!session) return;

            const actualCash = parseFloat(this.value) || 0;
            const expectedCash = session.openingCash + session.sales;
            const difference = actualCash - expectedCash;

            const diffElement = document.getElementById('cashDifference');
            diffElement.value = `${difference.toFixed(2)}`;
            diffElement.style.color = difference >= 0 ? '#28a745' : '#dc3545';
        });

        function closeSession(e) {
            e.preventDefault();

            const sessionId = parseInt(document.getElementById('closingSessionId').value);
            const sessionIndex = sessions.findIndex(s => s.id === sessionId);
            
            if (sessionIndex !== -1) {
                sessions[sessionIndex].status = 'CLOSED';
                sessions.splice(sessionIndex, 1);
            }

            showAlert('Session closed successfully!', 'success');
            closeCloseSessionModal();
            loadSessions();
            updateStats();
        }

        function viewSession(sessionId) {
            const session = sessions.find(s => s.id === sessionId);
            alert(`Session Details:\n\nSession: ${session.sessionNumber}\nTerminal: ${session.terminal}\nCashier: ${session.cashier}\nOpening Cash: ${session.openingCash.toFixed(2)}\nCurrent Cash: ${session.currentCash.toFixed(2)}\nStatus: ${session.status}`);
        }

        // Terminal Functions
        function openTerminalModal() {
            document.getElementById('terminalModal').classList.add('active');
            document.getElementById('terminalForm').reset();
            document.getElementById('terminalId').value = '';
        }

        function closeTerminalModal() {
            document.getElementById('terminalModal').classList.remove('active');
            document.getElementById('terminalForm').reset();
        }

        function saveTerminal(e) {
            e.preventDefault();

            const terminalId = document.getElementById('terminalId').value;
            const terminal = {
                id: terminalId ? parseInt(terminalId) : terminals.length + 1,
                code: document.getElementById('terminalCode').value,
                name: document.getElementById('terminalName').value,
                warehouse: document.getElementById('terminalWarehouse').options[document.getElementById('terminalWarehouse').selectedIndex].text,
                counter: document.getElementById('counterNumber').value,
                ip: document.getElementById('ipAddress').value,
                status: document.getElementById('terminalStatus').value
            };

            if (terminalId) {
                const index = terminals.findIndex(t => t.id === parseInt(terminalId));
                terminals[index] = terminal;
                showAlert('Terminal updated successfully!', 'success');
            } else {
                terminals.push(terminal);
                showAlert('Terminal added successfully!', 'success');
            }

            closeTerminalModal();
            loadTerminals();
        }

        function loadTerminals() {
            const tbody = document.getElementById('terminalsTableBody');
            tbody.innerHTML = '';

            terminals.forEach(terminal => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${terminal.code}</strong></td>
                    <td>${terminal.name}</td>
                    <td>${terminal.warehouse}</td>
                    <td>${terminal.counter}</td>
                    <td>${terminal.ip}</td>
                    <td><span class="status-badge status-${terminal.status === 'Y' ? 'active' : 'inactive'}">${terminal.status === 'Y' ? 'Active' : 'Inactive'}</span></td>
                    <td>
                        <button class="btn btn-info btn-small" onclick="editTerminal(${terminal.id})">Edit</button>
                        <button class="btn btn-danger btn-small" onclick="deleteTerminal(${terminal.id})">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function editTerminal(terminalId) {
            const terminal = terminals.find(t => t.id === terminalId);
            if (!terminal) return;

            document.getElementById('terminalId').value = terminal.id;
            document.getElementById('terminalCode').value = terminal.code;
            document.getElementById('terminalName').value = terminal.name;
            document.getElementById('counterNumber').value = terminal.counter;
            document.getElementById('ipAddress').value = terminal.ip;
            document.getElementById('terminalStatus').value = terminal.status;

            document.getElementById('terminalModal').classList.add('active');
        }

        function deleteTerminal(terminalId) {
            if (confirm('Are you sure you want to delete this terminal?')) {
                const index = terminals.findIndex(t => t.id === terminalId);
                terminals.splice(index, 1);
                showAlert('Terminal deleted successfully!', 'success');
                loadTerminals();
            }
        }

        // Payment Method Functions
        function updatePaymentMethod(method, enabled) {
            paymentMethods[method] = enabled;
            console.log('Payment Methods:', paymentMethods);
        }

        // Stats Functions
        function updateStats() {
            const activeSessions = sessions.filter(s => s.status === 'OPEN').length;
            const totalSales = sessions.reduce((sum, s) => sum + s.sales, 0);

            document.getElementById('activeSessionsCount').textContent = activeSessions;
            document.getElementById('totalSessionsToday').textContent = sessions.length;
            document.getElementById('totalSalesToday').textContent = `${totalSales.toFixed(2)}`;
        }

        // Alert Functions
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.innerHTML = `
                <span>${type === 'success' ? '‚úÖ' : type === 'danger' ? '‚ùå' : '‚ÑπÔ∏è'}</span>
                <span>${message}</span>
            `;
            alertContainer.appendChild(alert);

            setTimeout(() => {
                alert.remove();
            }, 5000);
        }

        // Save All Settings
        function saveAllSettings() {
            const settings = {
                general: {
                    companyName: document.getElementById('companyName').value,
                    defaultWarehouse: document.getElementById('defaultWarehouse').value,
                    defaultCurrency: document.getElementById('defaultCurrency').value,
                    taxRate: document.getElementById('taxRate').value,
                    receiptPrinter: document.getElementById('receiptPrinter').value,
                    invoicePrefix: document.getElementById('invoicePrefix').value,
                    autoPrintReceipt: document.getElementById('autoPrintReceipt').checked,
                    allowDiscount: document.getElementById('allowDiscount').checked,
                    maxDiscount: document.getElementById('maxDiscount').value,
                    lowStockWarning: document.getElementById('lowStockWarning').value,
                    sessionTimeout: document.getElementById('sessionTimeout').value,
                    barcodeScanner: document.getElementById('barcodeScanner').value
                },
                receipt: {
                    header: document.getElementById('receiptHeader').value,
                    footer: document.getElementById('receiptFooter').value,
                    showLogo: document.getElementById('showLogo').checked,
                    showBarcode: document.getElementById('showBarcode').checked
                },
                payment: {
                    methods: paymentMethods,
                    cashFloat: document.getElementById('cashFloatAmount').value,
                    cardReader: document.getElementById('cardReaderDevice').value,
                    upiMerchant: document.getElementById('upiMerchantId').value
                }
            };

            console.log('Saving settings:', settings);
            showAlert('All settings saved successfully!', 'success');
        }
    </script>
</body>
</html>